@import 'mixins/font-face';

@tailwind base;
@tailwind components;
@tailwind utilities;

// Mozilla Sans
@include font-face('Mozilla Sans', 'MozillaSansBETA-ExtraLight', 200, normal);
@include font-face('Mozilla Sans', 'MozillaSansBETA-Light', 300, normal);
@include font-face('Mozilla Sans', 'MozillaSansBETA-Regular', 400, normal);
@include font-face('Mozilla Sans', 'MozillaSansBETA-SemiBold', 600, normal);
@include font-face('Mozilla Sans', 'MozillaSansBETA-Bold', 700, normal);
// Mozilla Semi Slab
@include font-face('Mozilla Semi Slab', 'MozillaSemiSlabBETA-ExtraLight', 200, normal);
@include font-face('Mozilla Semi Slab', 'MozillaSemiSlabBETA-Light', 300, normal);
@include font-face('Mozilla Semi Slab', 'MozillaSemiSlabBETA-Regular', 400, normal);
@include font-face('Mozilla Semi Slab', 'MozillaSemiSlabBETA-SemiBold', 600, normal);
@include font-face('Mozilla Semi Slab', 'MozillaSemiSlabBETA-Bold', 700, normal);
// Mozilla Semi Slab Condensed
@include font-face('Mozilla Semi Slab Condensed', 'MozillaSemiSlabCndBETA-ExtraLight', 200, normal);
@include font-face('Mozilla Semi Slab Condensed', 'MozillaSemiSlabCndBETA-Light', 300, normal);
@include font-face('Mozilla Semi Slab Condensed', 'MozillaSemiSlabCndBETA-Regular', 400, normal);
@include font-face('Mozilla Semi Slab Condensed', 'MozillaSemiSlabCndBETA-SemiBold', 600, normal);
@include font-face('Mozilla Semi Slab Condensed', 'MozillaSemiSlabCndBETA-Bold', 700, normal);
// Mozilla Semi Slab Extended
@include font-face('Mozilla Semi Slab Extended', 'MozillaSemiSlabExtBETA-ExtraLight', 200, normal);
@include font-face('Mozilla Semi Slab Extended', 'MozillaSemiSlabExtBETA-Light', 300, normal);
@include font-face('Mozilla Semi Slab Extended', 'MozillaSemiSlabExtBETA-Regular', 400, normal);
@include font-face('Mozilla Semi Slab Extended', 'MozillaSemiSlabExtBETA-SemiBold', 600, normal);
@include font-face('Mozilla Semi Slab Extended', 'MozillaSemiSlabExtBETA-Bold', 700, normal);

body {
  @apply bg-white text-black;
  @apply font-sans font-normal text-base antialiased;
}

:root {
  @apply [--grid-site-margin:calc((24/400)*100vw)] md:[--grid-site-margin:calc((32/1440)*100vw)];
}

@layer components {
  .type-slab-2xl {
    @apply text-8xl font-slab-condensed font-semibold leading-none;
  }

  .type-slab-xl {
    @apply text-6xl font-slab-condensed font-semibold leading-none;
  }

  .type-slab-lg {
    @apply text-2xl font-slab-condensed font-semibold leading-tight;
  }

  .type-sans-xl {
    @apply text-6xl font-sans font-light leading-tighter tracking-tight;
  }

  .type-sans-lg {
    @apply text-4xl font-sans font-light leading-tighter tracking-tight;
  }

  .type-code {
    @apply bg-black text-white py-0.5 px-1 decoration-clone text-sm;
  }

  .type-caption {
    @apply uppercase opacity-50 text-sm leading-tight;
  }
}

@layer utilities {
  .centered-page {
    @apply max-w-page w-full mx-auto;
  }

  .grid-site {
    @apply grid-cols-24 gap-x-[calc((40/1440)*100vw)];
    @apply max-md:grid-cols-6 max-md:gap-x-[calc((24/400)*100vw)];
    @apply px-[--grid-site-margin];
  }

  .col-span-full {
    @apply col-span-6 md:col-span-24;
  }

  .col-span-xfull {
    @apply col-span-full -mx-[--grid-site-margin];
  }

  .col-span-1\/2 {
    @apply col-span-3 md:col-span-12;
  }

  .col-span-1\/3 {
    @apply col-span-2 md:col-span-8;
  }

  .col-span-2\/3 {
    @apply col-span-4 md:col-span-16;
  }

  .col-span-1\/6 {
    @apply col-span-1 md:col-span-4;
  }

  .col-span-2\/6 {
    @apply col-span-2 md:col-span-8;
  }

  .col-span-3\/6 {
    @apply col-span-3 md:col-span-12;
  }

  .col-span-4\/6 {
    @apply col-span-4 md:col-span-16;
  }

  .col-span-5\/6 {
    @apply col-span-5 md:col-span-20;
  }

  .gutenberg {
    @apply grid grid-site centered-page;

    // Apply full-width size to all blocks, by default
    > * {
      @apply col-span-full;
    }

    // Gap between blocks
    > * + * {
      @apply mt-6;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    li,
    pre {
      // Inline images
      img {
        @apply inline-flex translate-y-[-5%];
        @apply h-[1em] w-auto !important;
      }

      // Inline code
      code {
        @apply type-code;
      }

      // Inline links
      a {
        @apply underline hover:text-green focus:text-green;
      }
    }

    // Headings
    > h1,
    > h2,
    > h3,
    > h4,
    > h5,
    > h6 {
      @apply md:col-span-10 md:col-start-8;

      + * {
        @apply mt-3;
      }
    }
    > h1,
    > h2 {
      @apply font-semibold uppercase leading-tight indent-6;
    }
    > h3 {
      @apply uppercase leading-tight indent-6;
    }
    > h4 {
      @apply uppercase leading-tight opacity-50 indent-6;
    }
    > h5 {
      @apply font-semibold leading-tight;
    }
    > h6 {
      @apply leading-tight opacity-50;
    }

    // Paragraphs
    > p {
      @apply md:col-span-10 md:col-start-8;

      &:first-child:is(.lede *) {
        @apply max-w-content-lg type-slab-lg mb-2 md:mb-6;
      }

      &:empty {
        @apply hidden;
      }
    }

    // Code block
    pre {
      @apply md:col-span-12 md:col-start-7;

      code {
        @apply block bg-black px-4 py-3 leading-loose;
      }
    }

    // Blockquotes
    .wp-block-pullquote,
    blockquote {
      @apply md:col-span-full flex flex-col gap-3;

      p {
        @apply type-slab-xl md:indent-[20vw];
      }

      cite {
        @apply type-caption not-italic;
      }
    }

    // Lists
    ul,
    ol {
      @apply md:col-span-10 md:col-start-8;
    }
    li {
      @apply leading-normal;
    }
    ul li {
      @apply relative pl-5;

      &::before {
        content: '';
        @apply absolute left-0 top-[7px] flex size-2.5 bg-green;
      }
    }
    ol li {
      @apply relative pl-5;

      &::before {
        content: counter(list-item);
        @apply absolute left-0 top-0 font-semibold text-green;
      }
    }
    li + li,
    li > ul,
    li > ol {
      @apply mt-2;
    }

    // Figures and captions
    figure {
      @apply md:col-span-12 md:col-start-7;
      @apply flex flex-col gap-3;

      figcaption {
        @apply type-caption;
      }

      &.alignwide {
        @apply md:col-span-16 md:col-start-5;
      }

      &.alignfull {
        @apply md:col-span-xfull md:col-start-1;

        figcaption {
          @apply md:px-[--grid-site-margin];
        }
      }
    }

    // Tables
    figure.wp-block-table {
      @apply md:col-span-12 md:col-start-7;
    }

    // Images
    figure.wp-block-image,
    figure.wp-block-video,
    figure.wp-block-embed {
      img,
      video,
      .wp-block-embed__wrapper iframe {
        @apply w-full h-auto;
      }
    }

    // Embeds
    figure.wp-block-embed {
      .wp-block-embed__wrapper {
        @apply flex w-full justify-center;
      }

      &.wp-has-aspect-ratio {
        &.wp-embed-aspect-16-9 .wp-block-embed__wrapper iframe {
          @apply aspect-video;
        }

        &.wp-embed-aspect-4-3 .wp-block-embed__wrapper iframe {
          @apply aspect-[4/3];
        }
      }
    }

    // Separators
    hr.wp-block-separator {
      @apply md:col-span-10 md:col-start-8 my-6 border-transparent overflow-visible;

      &::before {
        content: '';
        @apply block h-[0.5px] w-full opacity-50;
        background-image: linear-gradient(to right, black 33%, transparent 0%);
        background-position: bottom;
        background-size: 4px 1px;
        background-repeat: repeat-x;
      }
    }

    // Buttons
    .wp-block-buttons {
      @apply flex flex-col gap-3 md:col-span-10 md:col-start-8;
    }
    .wp-block-button {
      @apply flex justify-center w-full;
    }
    .wp-block-button__link {
      @apply w-full p-10 uppercase text-center bg-black text-white border border-black;
    }
    .is-style-outline .wp-block-button__link {
      @apply bg-transparent text-black;
    }

    // Files
    .wp-block-file {
      @apply flex md:col-span-10 md:col-start-8;

      a:not(.wp-block-file__button) {
        @apply flex items-center gap-10 w-full p-10 bg-green text-black uppercase font-semibold;

        &:has(+ a.wp-block-file__button) {
          @apply md:py-8;

          &::after {
            @apply block shrink-0 content-arrow size-10 md:size-14;
          }
        }
      }

      a.wp-block-file__button {
        @apply hidden;
      }
    }
  }
}
